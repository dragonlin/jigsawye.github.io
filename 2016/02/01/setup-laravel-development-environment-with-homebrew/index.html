<!DOCTYPE html><html lang="zh-tw"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title>在 OSX 使用 Homebrew 打造精巧的 Laravel 開發環境 · JIGSAWYE</title><meta name="description" content="在 OSX 使用 Homebrew 打造精巧的 Laravel 開發環境 - Evan Ye"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><meta name="description" content="建議你熟悉 Terminal 的操作再參考本篇，否則容易把系統環境搞亂。

在開發 Laravel Application 時，新手可能使用 *AMP 的系統環境整合包，而大多數人會選擇官方所提供的 Homestead。但 Homestead 其實就是一包很大包的虛擬機再配上 Vargrant，曾幾何時我也是使用 Homestead，但是因為我的小 Macbook Air 實在是受不了虛擬機容量一">
<meta property="og:type" content="profile">
<meta property="og:title" content="在 OSX 使用 Homebrew 打造精巧的 Laravel 開發環境">
<meta property="og:url" content="http://jigsawye.com/2016/02/01/setup-laravel-development-environment-with-homebrew/index.html">
<meta property="og:site_name" content="JIGSAWYE">
<meta property="og:description" content="建議你熟悉 Terminal 的操作再參考本篇，否則容易把系統環境搞亂。

在開發 Laravel Application 時，新手可能使用 *AMP 的系統環境整合包，而大多數人會選擇官方所提供的 Homestead。但 Homestead 其實就是一包很大包的虛擬機再配上 Vargrant，曾幾何時我也是使用 Homestead，但是因為我的小 Macbook Air 實在是受不了虛擬機容量一">
<meta property="og:updated_time" content="2016-02-03T11:16:29.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="在 OSX 使用 Homebrew 打造精巧的 Laravel 開發環境">
<meta name="twitter:description" content="建議你熟悉 Terminal 的操作再參考本篇，否則容易把系統環境搞亂。

在開發 Laravel Application 時，新手可能使用 *AMP 的系統環境整合包，而大多數人會選擇官方所提供的 Homestead。但 Homestead 其實就是一包很大包的虛擬機再配上 Vargrant，曾幾何時我也是使用 Homestead，但是因為我的小 Macbook Air 實在是受不了虛擬機容量一">
<meta property="fb:app_id" content="495983917226031"><meta property="og:image" content="https://avatars1.githubusercontent.com/u/8567270?v=3&amp;s=300"><link rel="stylesheet" href="http://fonts.useso.com/css?family=Source+Sans+Pro:400,600" type="text/css"></head><body><div id="mask" style="display: none;"><img id="mask-image" src="#" style=" "></div><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">Home</a></li><li class="nav-list-item"><a href="/archives" target="_self" class="nav-list-link">Archive</a></li><li class="nav-list-item"><a href="/about" target="_self" class="nav-list-link">About</a></li><li class="nav-list-item"><a href="https://github.com/jigsawye" target="_self" class="nav-list-link"><i alt="Github" title="Github" class="fa fa-github"></i></a></li><li class="nav-list-item"><a href="https://facebook.com/jigsaw.ye" target="_self" class="nav-list-link"><i alt="Facebook" title="Facebook" class="fa fa-facebook"></i></a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link"><i alt="RSS" title="RSS" class="fa fa-rss"></i></a></li></ul></header><section class="container"><div class="post"><article class="post-block"><h1 class="post-title">在 OSX 使用 Homebrew 打造精巧的 Laravel 開發環境</h1><div class="post-time">2016年2月1日</div><div class="post-content"><div class="tip"><br>建議你熟悉 Terminal 的操作再參考本篇，否則容易把系統環境搞亂。<br></div>

<p>在開發 Laravel Application 時，新手可能使用 *AMP 的系統環境整合包，而大多數人會選擇官方所提供的 <a href="https://laravel.tw/docs/5.2/homestead" target="_blank" rel="external">Homestead</a>。但 Homestead 其實就是一包很大包的虛擬機再配上 Vargrant，曾幾何時我也是使用 Homestead，但是因為我的小 Macbook Air 實在是受不了虛擬機容量一大包，又吃一堆記憶體。</p>
<p>雖然標題是寫 Laravel，但是要應用在其他的 PHP Application 也是可行的。本篇就以 Homebrew 為主軸，打造 Laravel 的開發環境。</p>
<a id="more"></a>
<h2 id="啥？Homebrew"><a href="#啥？Homebrew" class="headerlink" title="啥？Homebrew"></a>啥？Homebrew</h2><p>如同 ubuntu 有 <code>apt-get</code>、CentOS 有 <code>yum</code> 一樣，<a href="http://brew.sh/index_zh-tw.html" target="_blank" rel="external">Homebrew</a> 就是 OSX 的套件管理器。不同的是前者都是系統內建的，而 Homebrew 則是因為 OSX 本身沒有這種東西，所以就有大神為 OSX 打造了套件管理器。</p>
<h2 id="需要什麼？"><a href="#需要什麼？" class="headerlink" title="需要什麼？"></a>需要什麼？</h2><p>在開始之前，先說說開發 Laravel 需要哪些需求？</p>
<h3 id="PHP-CLI"><a href="#PHP-CLI" class="headerlink" title="PHP-CLI"></a>PHP-CLI</h3><p>Laravel 是目前在 PHP 中最熱門的 Framework，其實除了透過 *AMP 指向 <code>public</code> 資料夾及使用 Homestead 外，Laravel 也提供了 command line 的方式啟動 development server。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ php artisan serve</span><br><span class="line">Laravel development server started on http://localhost:8000/</span><br></pre></td></tr></table></figure>
<p>只要在專案目錄中執行 <code>php artisan serve</code>，就會執行 development server。也就是說我們至少需要 php-cli 來執行 development server。</p>
<blockquote>
<p>PHP-CLI 為 PHP Command Line Interface，也就是 Command Line 的 PHP 執行環境。</p>
</blockquote>
<h3 id="MariaDB"><a href="#MariaDB" class="headerlink" title="MariaDB"></a>MariaDB</h3><p>沒錯，開發一個 Web Application 一定需要資料庫，而我平常是使用 MariaDB，所以我們也必須安裝 MariaDB。</p>
<h3 id="Redis"><a href="#Redis" class="headerlink" title="Redis"></a>Redis</h3><p>而我平常在開發的時候，會把 Cache、Session、及 Queue 的 Driver 都設定為 Redis，所以我們會安裝 Redis。</p>
<h3 id="總結"><a href="#總結" class="headerlink" title="總結"></a>總結</h3><p>所以我們必須透過 Homebrew 安裝這些東西：</p>
<ul>
<li>php</li>
<li>mariadb</li>
<li>redis</li>
</ul>
<h2 id="Getting-started"><a href="#Getting-started" class="headerlink" title="Getting started"></a>Getting started</h2><h3 id="Homebrew"><a href="#Homebrew" class="headerlink" title="Homebrew"></a>Homebrew</h3><h4 id="安裝"><a href="#安裝" class="headerlink" title="安裝"></a>安裝</h4><p>開始之前，當然必須先安裝 <a href="http://brew.sh/index_zh-tw.html" target="_blank" rel="external">Homebrew</a>，官方網站已有提供指令進行安裝，打開 terminal 並輸入即可：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/bin/ruby <span class="_">-e</span> <span class="string">"<span class="variable">$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)</span>"</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>此指令會透過 curl 下載官方安裝檔，並透過 ruby 執行。他會在你的電腦安裝 homebrew。</p>
</blockquote>
<h4 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h4><p>Homebrew 的使用方式很簡單，以下介紹幾個常用指令：</p>
<ul>
<li><code>brew update</code>：更新 Homebrew。</li>
<li><code>brew search wget</code>：透過 <code>brew search</code> 可以搜尋套件，範例為搜尋名字有 wget 的套件。</li>
<li><code>brew install wget</code>：你可以使用 <code>brew intsall</code> 來安裝套件，範例會安裝 wget。</li>
</ul>
<p>更多指令可以輸入 <code>brew help</code>，或參考<a href="https://github.com/Homebrew/homebrew/blob/master/share/doc/homebrew/FAQ.md" target="_blank" rel="external">官方的 FAQ</a>。</p>
<h3 id="PHP"><a href="#PHP" class="headerlink" title="PHP"></a>PHP</h3><h4 id="安裝-1"><a href="#安裝-1" class="headerlink" title="安裝"></a>安裝</h4><p>當然，我們首先必須安裝 PHP，我們先執行以下指令尋找 php：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ brew search php</span><br></pre></td></tr></table></figure>
<p>你應該會看到非常多的 php，像是 <code>homebrew/php/php53</code>、<code>homebrew/php/php54</code>⋯⋯一直到最新的 <code>homebrew/php/php70</code>。而 php 7.0 有相容舊版本，所以我是使用 php 7.0 開發，所以我們來搜尋一下 php 7.0：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ brew search php70</span><br></pre></td></tr></table></figure>
<p>你會看到 PHP 7.0，及 PHP 7.0 的 extenstions。我們直接安裝 php70 即可：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ brew install php70</span><br></pre></td></tr></table></figure>
<h4 id="使用-1"><a href="#使用-1" class="headerlink" title="使用"></a>使用</h4><p>安裝完後，執行以下指令看看是否有安裝完成：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ php -v</span><br><span class="line">PHP 7.0.2 (cli) (built: Jan  7 2016 10:40:26) ( NTS )</span><br><span class="line">Copyright (c) 1997-2015 The PHP Group</span><br><span class="line">Zend Engine v3.0.0, Copyright (c) 1998-2015 Zend Technologies</span><br></pre></td></tr></table></figure>
<p>你可以進入一個 Laravel 專案，並執行 development server 看看：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ laravel new awesome_homebrew</span><br><span class="line">$ <span class="built_in">cd</span> awesome_homebrew</span><br><span class="line">$ php artisan serve</span><br><span class="line">Laravel development server started on http://localhost:8000/</span><br></pre></td></tr></table></figure>
<p>你也可以指定 Port：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ php artisan serve --port=8080</span><br><span class="line">Laravel development server started on http://localhost:8080/</span><br></pre></td></tr></table></figure>
<p>如果是一般的 PHP 專案，可以用以下方式開啟 development server：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ php -S localhost:8000 -t public</span><br><span class="line">PHP 7.0.2 Development Server started at Mon Feb  1 17:02:58 2016</span><br><span class="line">Listening on http://localhost:8000</span><br><span class="line">Document root is /Users/jigsawye/Projects/laravel/demo/public</span><br><span class="line">Press Ctrl-C to quit.</span><br></pre></td></tr></table></figure>
<p>其中 <code>localhost:8000</code> 的部分是指你要開在哪個 Host，後面的 public 則是選擇你 <code>indxe.php</code> 的目錄，也就是 Application 進入點。</p>
<h3 id="MariaDB-1"><a href="#MariaDB-1" class="headerlink" title="MariaDB"></a>MariaDB</h3><h4 id="安裝-2"><a href="#安裝-2" class="headerlink" title="安裝"></a>安裝</h4><p>安裝方式一樣，先搜尋再安裝：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ brew search mariadb</span><br><span class="line">$ brew install mariadb</span><br></pre></td></tr></table></figure>
<h4 id="使用-2"><a href="#使用-2" class="headerlink" title="使用"></a>使用</h4><p>安裝完成後，Homebrew 會提示你可以使用以下指令開啟 MySQL：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ mysql.server start</span><br><span class="line">Starting MySQL</span><br><span class="line">. SUCCESS!</span><br></pre></td></tr></table></figure>
<p>然後你可以連接至你的 MySQL：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ mysql -uroot</span><br></pre></td></tr></table></figure>
<h3 id="Redis-1"><a href="#Redis-1" class="headerlink" title="Redis"></a>Redis</h3><h4 id="安裝-3"><a href="#安裝-3" class="headerlink" title="安裝"></a>安裝</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ brew search redis</span><br><span class="line">$ brew install redis</span><br></pre></td></tr></table></figure>
<h4 id="使用-3"><a href="#使用-3" class="headerlink" title="使用"></a>使用</h4><p>同樣的，Homebrew 提示使用以下指令開啟 Redis：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">$ redis-server /usr/<span class="built_in">local</span>/etc/redis.conf</span><br><span class="line">5725:M 01 Feb 15:53:36.291 * Increased maximum number of open files to 10032 (it was originally <span class="built_in">set</span> to 2560).</span><br><span class="line">                _._</span><br><span class="line">           _.-``__ <span class="string">''</span>-._</span><br><span class="line">      _.-``    `.  `_.  <span class="string">''</span>-._           Redis 3.0.7 (00000000/0) 64 bit</span><br><span class="line">  .-`` .-```.  ```\/    _.,_ <span class="string">''</span>-._</span><br><span class="line"> (    <span class="string">'      ,       .-`  | `,    )     Running in standalone mode</span><br><span class="line"> |`-._`-...-` __...-.``-._|'</span>` _.-<span class="string">'|     Port: 6379</span><br><span class="line"> |    `-._   `._    /     _.-'</span>    |     PID: 5725</span><br><span class="line">  `-._    `-._  `-./  _.-<span class="string">'    _.-'</span></span><br><span class="line"> |`-._`-._    `-.__.-<span class="string">'    _.-'</span>_.-<span class="string">'|</span><br><span class="line"> |    `-._`-._        _.-'</span>_.-<span class="string">'    |           http://redis.io</span><br><span class="line">  `-._    `-._`-.__.-'</span>_.-<span class="string">'    _.-'</span></span><br><span class="line"> |`-._`-._    `-.__.-<span class="string">'    _.-'</span>_.-<span class="string">'|</span><br><span class="line"> |    `-._`-._        _.-'</span>_.-<span class="string">'    |</span><br><span class="line">  `-._    `-._`-.__.-'</span>_.-<span class="string">'    _.-'</span></span><br><span class="line">      `-._    `-.__.-<span class="string">'    _.-'</span></span><br><span class="line">          `-._        _.-<span class="string">'</span><br><span class="line">              `-.__.-'</span></span><br><span class="line"></span><br><span class="line">5725:M 01 Feb 15:53:36.293 <span class="comment"># Server started, Redis version 3.0.7</span></span><br><span class="line">5725:M 01 Feb 15:53:36.293 * DB loaded from disk: 0.000 seconds</span><br><span class="line">5725:M 01 Feb 15:53:36.293 * The server is now ready to accept connections on port 6379</span><br></pre></td></tr></table></figure>
<p>不過你會發現，Redis 會佔用一個 terminal，相當不便。</p>
<h3 id="Homebrew-Services"><a href="#Homebrew-Services" class="headerlink" title="Homebrew Services"></a>Homebrew Services</h3><p>相信有些人可能會發現，在啟動 MariaDB 及 Redis 時，指令有些微的不同，沒有一個統一管理這些 services 的工具，像是 ubuntu 的 <code>service &lt;servicename&gt; start</code>。雖然 Homebrew 有提供 <code>launchctl</code> 來管理，不過操作起來實在是太麻煩了。其實 Homebrew 額外有提供一個 services 的管理工具，透過這個工具就可以統一管理所有的 services。</p>
<h4 id="安裝-4"><a href="#安裝-4" class="headerlink" title="安裝"></a>安裝</h4><p>執行以下指令安裝：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ brew tap homebrew/services</span><br></pre></td></tr></table></figure>
<p>如果你剛剛有透過指令啟動 MariaDB 與 Redis，現在我們先將它關閉。Redis 直接透過 <code>Ctrl + C</code> 關閉即可，MariaDB 請使用以下指令關閉：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ mysql.server stop</span><br><span class="line">Shutting down MySQL</span><br><span class="line">... SUCCESS!</span><br><span class="line">`</span><br></pre></td></tr></table></figure>
<h4 id="使用-4"><a href="#使用-4" class="headerlink" title="使用"></a>使用</h4><p>使用以下指令可以查看目前所安裝的 services：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ brew services list</span><br><span class="line">Name    Status  User Plist</span><br><span class="line">mariadb stopped</span><br><span class="line">php70   stopped</span><br><span class="line">redis   stopped</span><br></pre></td></tr></table></figure>
<p>很方便吧！接著我們來啟動 MariaDB 及 Redis：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ brew services start mariadb</span><br><span class="line">==&gt; Successfully started `mariadb` (label: homebrew.mxcl.mariadb)</span><br><span class="line"></span><br><span class="line">$ brew services start redis</span><br><span class="line">==&gt; Successfully started `redis` (label: homebrew.mxcl.redis)</span><br></pre></td></tr></table></figure>
<p>查看一下啟用之後的 services 列表：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ brew sercies list</span><br><span class="line">Name    Status  User     Plist</span><br><span class="line">mariadb started jigsawye /Users/jigsawye/Library/LaunchAgents/homebrew.mxcl.mariadb.plist</span><br><span class="line">php70   stopped</span><br><span class="line">redis   started jigsawye /Users/jigsawye/Library/LaunchAgents/homebrew.mxcl.redis.plist</span><br></pre></td></tr></table></figure>
<p>若要關閉 servies，執行 <code>brew services stop &lt;servicename&gt;</code> 即可！</p>
<h2 id="額外補充"><a href="#額外補充" class="headerlink" title="額外補充"></a>額外補充</h2><h3 id="多版本-PHP-切換"><a href="#多版本-PHP-切換" class="headerlink" title="多版本 PHP 切換"></a>多版本 PHP 切換</h3><p>在一些專案可能需不同的 PHP 版本來執行，以下就說明如何接換多版本的 PHP。</p>
<h4 id="安裝其他版本的-PHP"><a href="#安裝其他版本的-PHP" class="headerlink" title="安裝其他版本的 PHP"></a>安裝其他版本的 PHP</h4><p>像前面說明的一樣，我們可以直接安裝其他版本的 PHP：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ brew install php56</span><br><span class="line">Error: Cannot install homebrew/php/php56 because conflicting formulae are installed.</span><br><span class="line"></span><br><span class="line">  php70: because different php versions install the same binaries.</span><br><span class="line"></span><br><span class="line">Please `brew unlink php70` before continuing.</span><br><span class="line"></span><br><span class="line">Unlinking removes a formula<span class="string">'s symlinks from /usr/local. You can</span><br><span class="line">link the formula again after the install finishes. You can --force this</span><br><span class="line">install, but the build may fail or cause obscure side-effects in the</span><br><span class="line">resulting software.</span></span><br></pre></td></tr></table></figure>
<p>你應該看到這個錯誤，他的意思是指你已經安裝了其他版本的 PHP，請 <code>unlink</code> 其他版本後再安裝。<code>unlink</code> 意指你必須將原本綁的 <code>php70</code> 給卸除掉（並非移除），再接著安裝。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ brew unlink php70</span><br><span class="line">$ brew install php56</span><br></pre></td></tr></table></figure>
<p>接著就可以查看 PHP 版本，你應該切換成 PHP 5.6：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ php -v</span><br><span class="line">PHP 5.6.17 (cli) (built: Jan  8 2016 10:27:48)</span><br><span class="line">Copyright (c) 1997-2015 The PHP Group</span><br><span class="line">Zend Engine v2.6.0, Copyright (c) 1998-2015 Zend Technologies</span><br></pre></td></tr></table></figure>
<h4 id="切換回-PHP-7-0"><a href="#切換回-PHP-7-0" class="headerlink" title="切換回 PHP 7.0"></a>切換回 PHP 7.0</h4><p>若要切換回去也相當簡單，<code>unlink</code> PHP 5.6 再 <code>link</code> PHP 7.0 即可：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ brew unlink php56</span><br><span class="line">Unlinking /usr/<span class="built_in">local</span>/Cellar/php56/5.6.17... 18 symlinks removed</span><br><span class="line">$ brew link php70</span><br><span class="line">Linking /usr/<span class="built_in">local</span>/Cellar/php70/7.0.2... 17 symlinks created</span><br><span class="line">$ php -v</span><br><span class="line">PHP 7.0.2 (cli) (built: Jan  7 2016 10:40:26) ( NTS )</span><br><span class="line">Copyright (c) 1997-2015 The PHP Group</span><br><span class="line">Zend Engine v3.0.0, Copyright (c) 1998-2015 Zend Technologies</span><br></pre></td></tr></table></figure>
<h3 id="PHP-extenstions"><a href="#PHP-extenstions" class="headerlink" title="PHP extenstions"></a>PHP extenstions</h3><p>有時你可能需要安裝 PHP 的 extenstions，像是為了產生 PHPUnit 的 coverage report 就必須安裝 Xdebug，為了提升執行速度則裝 OPCache。</p>
<h4 id="安裝-extenstions"><a href="#安裝-extenstions" class="headerlink" title="安裝 extenstions"></a>安裝 extenstions</h4><p>所有的 PHP extenstions 都是以 <code>phpXX-*</code> 來命名，也就是說如果你現在使用 PHP 7.0，那麼就會是 <code>php70-*</code>。讓我們來搜尋 PHP 7.0 有哪些 extenstions 可以安裝：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ brew search php70</span><br><span class="line">homebrew/php/php70                  homebrew/php/php70-imagick          homebrew/php/php70-mongodb          homebrew/php/php70-pthreads</span><br><span class="line">homebrew/php/php70-amqp             homebrew/php/php70-intl             homebrew/php/php70-msgpack          homebrew/php/php70-rdkafka</span><br><span class="line">homebrew/php/php70-apcu             homebrew/php/php70-kafka            homebrew/php/php70-mustache         homebrew/php/php70-redis</span><br><span class="line">homebrew/php/php70-apcu-bc          homebrew/php/php70-libsodium        homebrew/php/php70-oauth            homebrew/php/php70-snmp</span><br><span class="line">homebrew/php/php70-ast              homebrew/php/php70-lzf              homebrew/php/php70-opcache          homebrew/php/php70-tidy</span><br><span class="line">homebrew/php/php70-blitz            homebrew/php/php70-mailparse        homebrew/php/php70-pcntl            homebrew/php/php70-uuid</span><br><span class="line">homebrew/php/php70-ev               homebrew/php/php70-mcrypt           homebrew/php/php70-pdo-dblib        homebrew/php/php70-v8js</span><br><span class="line">homebrew/php/php70-gmp              homebrew/php/php70-mecab            homebrew/php/php70-pdo-pgsql        homebrew/php/php70-xdebug</span><br><span class="line">homebrew/php/php70-hprose           homebrew/php/php70-memcached        homebrew/php/php70-pspell           homebrew/php/php70-yaml</span><br></pre></td></tr></table></figure>
<p>你會看到一拖車的 extenstions，這邊我以 Xdebug 為例：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ brew install php70-xdebug</span><br></pre></td></tr></table></figure>
<p>然後看看你的 PHP 版本，Xdebug 應該已經安裝完成：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ php -v</span><br><span class="line">PHP 7.0.2 (cli) (built: Jan  7 2016 10:40:26) ( NTS )</span><br><span class="line">Copyright (c) 1997-2015 The PHP Group</span><br><span class="line">Zend Engine v3.0.0, Copyright (c) 1998-2015 Zend Technologies</span><br><span class="line">    with Xdebug v2.4.0RC3, Copyright (c) 2002-2015, by Derick Rethans</span><br></pre></td></tr></table></figure>
<h4 id="關閉-extenstions"><a href="#關閉-extenstions" class="headerlink" title="關閉 extenstions"></a>關閉 extenstions</h4><p>所有的 extenstions 啟用檔案都會存放在 <code>/usr/local/etc/php/X.X/conf.d/ext-*.ini</code>，以剛剛安裝的 Xdebug 為例，他的檔案會存放在 <code>/usr/local/etc/php/7.0/conf.d/ext-xdebug.ini</code>。若要關閉該 extenstions，用編輯器編輯他即可：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /usr/<span class="built_in">local</span>/etc/php/7.0/conf.d/ext-xdebug.ini</span><br></pre></td></tr></table></figure>
<p>檔案內容很簡單：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[xdebug]</span><br><span class="line">zend_extension=<span class="string">"/usr/local/opt/php70-xdebug/xdebug.so"</span></span><br></pre></td></tr></table></figure>
<p>若要關閉，把第二行註解掉在存檔即可：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[xdebug]</span><br><span class="line"><span class="comment"># zend_extension="/usr/local/opt/php70-xdebug/xdebug.so"</span></span><br></pre></td></tr></table></figure>
<p>註解完後就關閉了：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ php -v</span><br><span class="line">PHP 7.0.2 (cli) (built: Jan  7 2016 10:40:26) ( NTS )</span><br><span class="line">Copyright (c) 1997-2015 The PHP Group</span><br><span class="line">Zend Engine v3.0.0, Copyright (c) 1998-2015 Zend Technologies</span><br></pre></td></tr></table></figure>
<h2 id="Done！"><a href="#Done！" class="headerlink" title="Done！"></a>Done！</h2><p>到此就完成囉，其實安裝起來不會很困難，操作起來也很簡單。相比 *AMP 與 Homestead，使用的資源及容量也輕巧很多。希望本篇可以提供給操作 terminal 一段時間的人做參考，畢竟自幹環境比起一鍵安裝包安心多了 XD，想裝就裝，想砍就砍！</p>
</div></article></div></section><footer><div class="paginator"><a href="/2016/04/18/understanding-javascript-async-await/" class="prev">上一篇</a><a href="/2015/12/22/push-notification-to-user-in-laravel-5/" class="next">下一篇</a></div><div id="disqus_thread"></div><script>var disqus_shortname = 'jigsawnotes';
var disqus_identifier = '2016/02/01/setup-laravel-development-environment-with-homebrew/';
var disqus_title = '在 OSX 使用 Homebrew 打造精巧的 Laravel 開發環境';
var disqus_url = 'http://jigsawye.com/2016/02/01/setup-laravel-development-environment-with-homebrew/';
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//jigsawnotes.disqus.com/count.js" async></script><div class="copyright"><p>© 2015 - 2016 <a href="http://jigsawye.com">Evan Ye</a>, unless otherwise noted.</p></div></footer></div><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-57230871-3",'auto');ga('send','pageview');</script><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML"></script></body></html>